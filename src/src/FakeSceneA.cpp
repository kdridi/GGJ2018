//
//  FakeSceneA.cpp
//  myproject
//
//  Created by Karim DRIDI on 27/01/2018.
//

#include "FakeSceneA.hpp"
#include "Engine.hpp"

#include "SpriteObj.hpp"
#include "MainObj.hpp"
#include "ColliderMap.hpp"
#include "MoveObj.hpp"
#include "CrackObj.hpp"
#include "MonsterObj.hpp"
#include "ShareObj.hpp"
#include "ExitObj.hpp"
#include "SwitchObj.hpp"

FakeSceneA::~FakeSceneA()
{
}

static int ids0[] = {
    2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
    2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
    2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
    2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
    2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
    2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
    2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
    2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
    2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
    2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
    2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
    2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
};

static int ids1[] = {
    12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,
    12, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,12,
    12, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0,12,
    12, 0, 0, 0,12,12,12,12,12,12,12,12, 0, 5, 0,12,
    12, 0, 0, 0,12, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0,12,
    12, 0, 0, 0,12, 0, 0, 0, 0, 1, 0,12, 0, 0, 0,42,
    12, 0, 0, 0,12, 0, 0, 0, 0, 2, 0,12, 0, 0, 0,12,
    12, 0, 0, 0,12, 0, 0, 0, 0, 0, 0,11, 0, 0, 0,12,
    12, 0, 0, 0,12,12,12,12,12,12,12,12, 0, 0, 0,12,
    12, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5, 0,12,
    12, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,12,
    12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12
};

// static int ids1[] = {
//     12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,
//     12, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,12,
//     12, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,12,
//     12, 0, 0,12, 0, 0, 0, 0, 0, 0, 0, 0,12, 0, 0,12,
//     12, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,12,
//     12, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,12,
//     12, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,12,
//     12, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,12,
//     12, 0, 0,12, 0, 0, 0, 0, 0, 0, 0, 0,12, 0, 0,12,
//     12, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,12,
//     12, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,12,
//     12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12
// };

void FakeSceneA::init()
{
    for (int x = 0; x < 16; ++x)
    {
        for (int y = 0; y < 12; ++y)
        {
            auto id = ids1[y * 16 + x];
            if (id > 0)
            {
                if (id == 1) // first player
                {
                    auto *obj = new MainObj(1, 1);
                    obj->moveAt(sf::Vector2f(x * 64, y * 64));
                    push_back(2, obj);
                }
                else if (id == 2) // second player
                {
                    auto *obj = new MainObj(2, 1);
                    obj->moveAt(sf::Vector2f(x * 64, y * 64));
                    push_back(2, obj);
                }
                else if (id == 11) // wall hole
                {
                    pushDoorSmallObj(x, y);
                }
                else if (id == 42) // exit
                {
                    pushExitObj("room01", x * 64, y * 64, 64, 64, 0, 1);
                }
                else if (id == 3) // exit
                {
                    pushPressureObj(PRESSURE_OPEN_DOOR, x * 64, y * 64, true, true, "");
                }
                else if (id == 4) // monster
                {
                    pushEnemyCloseObj(x * 64, y * 64, 2, 2);
                }
                else if (id == 5) // Share
                {
                    pushLinkedObj(x, y);
                }
                else if (id == 6) // Move
                {
                    pushMobileObj(x, y);
                }
                else
                {
                    pushStaticObj(x, y);
                }
            }
        }
    }
}

